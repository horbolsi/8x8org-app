#!/bin/bash
echo "ğŸ”„ Syncing 8x8org to GitHub..."
cd /home/runner/workspace

# Check for token
if [ -z "$GITHUB_TOKEN" ]; then
    echo "âŒ GITHUB_TOKEN environment variable not set"
    echo "Set it with: export GITHUB_TOKEN=your_token"
    echo "Or enter your token:"
    read -s GITHUB_TOKEN
    echo ""
fi

if [ -z "$GITHUB_TOKEN" ]; then
    echo "âŒ Token required"
    exit 1
fi

# Git operations
git add .
git commit -m "Update: $(date '+%Y-%m-%d %H:%M:%S')" 2>/dev/null || echo "No changes to commit"

# Push using token from environment
if git push https://horbolsi:$GITHUB_TOKEN@github.com/horbolsi/8x8org-app.git main; then
    echo "âœ… Successfully synced to GitHub!"
    echo "ğŸ“Š View at: https://github.com/horbolsi/8x8org-app"
else
    echo "âŒ Sync failed"
fi
